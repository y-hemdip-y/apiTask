<div class="page-container">


  <div class="manage-users-container">
    <h2 class="table-title">Manage Users</h2>

    <div class="users-table-wrapper">
      <table class="users-table">
        <thead>
          <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>User Type</th>
            <th>Gender</th>
            <th>Photo</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of users">
            <td>{{ user.first_name }}</td>
            <td>{{ user.last_name }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.phone_number }}</td>
            <td>{{ user.user_type }}</td>
            <td>{{ user.gender }}</td>
            <td>
              <div class="photo-cell">
                <img *ngIf="user.image" [src]="user.image" alt="User Photo" class="user-photo" />
                <input type="file" (change)="uploadPhoto($event, user)" />
              </div>
            </td>
            <td class="action-buttons" style="width: 10vw;">
              <div class="button-group">
                <button (click)="selectUser(user)" class="edit-button" style="margin: 3px;">Edit</button>
                <button (click)="deleteUser(user)" class="delete-button">Delete</button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="selectedUser" class="edit-form-container">
      <h3>Edit User: {{ selectedUser.first_name }} {{ selectedUser.last_name }}</h3>
      <form [formGroup]="updateForm" (ngSubmit)="submitUpdate()">

        <div class="form-group">
          <label>First Name:</label>
          <input formControlName="first_name" type="text" />
        </div>

        <div class="form-group">
          <label>Last Name:</label>
          <input formControlName="last_name" type="text" />
        </div>

        <div class="form-group">
          <label>Email:</label>
          <input formControlName="email" type="email" />
        </div>

        <div class="form-group">
          <label>Dial Code:</label>
          <input formControlName="dial_code" type="text" />
        </div>

        <div class="form-group">
          <label>Phone Number:</label>
          <input formControlName="phone_number" type="text" />
        </div>

        <div class="form-group">
          <label>Gender:</label>
          <select formControlName="gender">
            <option value="">Select</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
          </select>
        </div>

        <div class="form-group">
          <label>User Type:</label>
          <input formControlName="user_type" type="text" />
        </div>

        <div class="form-group">
          <label>Role ID:</label>
          <input formControlName="role_id" type="text" />
        </div>

        <div class="form-group">
          <label>Password:</label>
          <input formControlName="password" type="password" />
        </div>

        <button type="submit" [disabled]="updateForm.invalid" class="update-button">Update User</button>
      </form>
    </div>

    <div class="message-container">
      <div *ngIf="message === 'User updated successfully' || message === 'User deleted successfully' || message === 'Photo uploaded successfully'" class="success-message">
        {{ message }}
      </div>
      <div *ngIf="message && message !== 'User updated successfully' && message !== 'User deleted successfully' && message !== 'Photo uploaded successfully'" class="error-message">
        {{ message }}
      </div>
    </div>
  </div>
</div>